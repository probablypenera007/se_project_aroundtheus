!function(){"use strict";const e={inputSelector:".modal__input",submitButtonSelector:".modal__button_submit",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:".modal__form"},t=[...document.querySelectorAll(e.formSelector)],s=(document.querySelectorAll(".modal"),document.querySelector("#profile-button-edit")),o=document.querySelector("#modal-edit-profile"),n=(o.querySelector("#modal-edit-button-close"),document.querySelector(".profile__name"),document.querySelector(".profile__subtitle"),document.querySelector("#edit-name"),document.querySelector("#edit-bio"),o.querySelector("#modal-form-edit"),document.querySelector("#modal-button-save"),document.querySelector("#profile-button-add")),r=document.querySelector("#modal-add-profile"),i=r.querySelector("#add-modal-form"),a=(r.querySelector("#modal-button-close-add"),document.querySelector("#modal-button-create"),i.querySelector("#add-title"),i.querySelector("#add-imageURL"),document.querySelector("#modal-previewImage"));document.querySelector(".modal__previewImage"),document.querySelector("#preview-title"),a.querySelector("#modal-button-close-preview"),document.querySelector("#profile-avatar"),document.querySelector(".cards__content"),document.querySelector("#card-template").content.firstElementChild.cloneNode(!0);class l{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=Array.from(t.querySelectorAll(this._inputSelector)),this._submitButton=t.querySelector(this._submitButtonSelector)}_showInputError(e,t){e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e,t){const s=e.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),s.textContent=" ",s.classList.remove(this._errorClass)}_checkInputValidity(e,t){t.validity.valid?this._hideInputError(e,t):this._showInputError(t,e.querySelector(`#${t.id}-error`))}_checkFormValidity=()=>this._inputElements.every((e=>e.validity.valid));resetValidation(){this.toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(this._form,e)}))}toggleButtonState(){this._checkFormValidity()?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(this._form,e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this.setEventListeners()}}class c{constructor(e,t,s){let{name:o,link:n}=e;this._name=o,this._link=n,this._cardSelector=t,this._handleCardClick=s}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleHeartButton()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleTrashButton()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})}))}_handleHeartButton(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleTrashButton(){this._cardElement.remove(),this._cardElement=null}_getElement(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getCardElement(){this._cardElement=this._getElement();const e=this._cardElement.querySelector(".card__title"),t=this._cardElement.querySelector(".card__image");return t.src=this._link,t.alt=this._name,e.textContent=this._name,this._setEventListeners(),this._cardElement}}class u{constructor(e){this._popupElement=document.querySelector(e),this._closeByEscape=this._closeByEscape.bind(this),this._closeOverlaybyClick=this._closeOverlaybyClick.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._closeByEscape),this._popupElement.addEventListener("mousedown",this._closeOverlaybyClick)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._closeByEscape),this._popupElement.removeEventListener("mousedown",this._closeOverlaybyClick)}_closeByEscape=e=>{"Escape"===e.key&&this.close()};_closeOverlaybyClick(e){e.target.classList.contains("modal_opened")&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__button-close"))&&this.close()}))}}class d extends u{constructor(e,t){super(e),this._popForm=this._popupElement.querySelector(".modal__form"),this._popSubmitBtn=this._popForm.querySelector(".modal__button_submit"),this._popInputs=this._popForm.querySelectorAll(".modal__input"),this._handleFormSubmit=t}_getInputValues(){const e={};return this._popInputs.forEach((t=>{e[t.name]=t.value})),e}_handleSubmit(e){e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this.close()}setEventListeners(){super.setEventListeners(),this._popForm.addEventListener("submit",this._handleSubmit.bind(this))}setInputValues(e){this._popInputs.forEach((t=>{e[t.name]&&(t.value=e[t.name])}))}close(){this._popForm.reset(),super.close()}}const m={},_=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){this._nameElement.textContent=e.name,this._jobElement.textContent=e.job}}(".profile__name",".profile__subtitle");function p(e){return new c(e,"#card-template",v).getCardElement()}const h=new class{constructor(e,t){let{items:s,renderer:o}=e;this._items=s,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=p(e);h.addItem(t)}},".cards__content");h.renderItems();const E=new class extends u{constructor(e){super(e),this._image=this._popupElement.querySelector(".modal__previewImage"),this._caption=this._popupElement.querySelector("#preview-title")}open(e){super.open(),e&&(this._image.src=e.link,this._image.alt=e.name,this._caption.textContent=e.name)}}("#modal-previewImage");E.setEventListeners();const y=new d("#modal-edit-profile",(e=>{_.setUserInfo(e),y.close()}));y.setEventListeners();const S=new d("#modal-add-profile",(e=>{!function(e,t){const s=p({name:e,link:t});h.addItem(s),S.close()}(e.name,e.link)}));function v(e){E.open(e)}S.setEventListeners(),(e=>{t.forEach((t=>{const s=new l(e,t),o=t.getAttribute("name");m[o]=s,s.enableValidation()}))})(e),s.addEventListener("click",(()=>{const e=_.getUserInfo();m["modal-edit-form"].resetValidation(),y.setInputValues(e),y.open()})),n.addEventListener("click",(()=>{m["modal-add-form"].resetValidation(),S.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0ZyRixLQUFLaUgsT0FBT3hELElBQU00QixFQUFLMUMsS0FDdkIzQyxLQUFLaUgsT0FBT3ZELElBQU0yQixFQUFLM0MsS0FDdkIxQyxLQUFLa0gsU0FBU2xHLFlBQWNxRSxFQUFLM0MsS0FFckMsR0g0QndDLHVCQUMxQ3FFLEVBQWU5RSxvQkFFZixNQUFNa0YsRUFBbUIsSUFBSTVDLEVBQzNCLHVCQUNDNkMsSUFDQzVCLEVBQVNPLFlBQVlxQixHQUNyQkQsRUFBaUJqRCxPQUFPLElBRzVCaUQsRUFBaUJsRixvQkFFakIsTUFBTW9GLEVBQWUsSUFBSTlDLEVBQWMsc0JBQXVCNkMsS0FROUQsU0FBb0NFLEVBQU8zRSxHQUN6QyxNQUFNNEUsRUFBVXZCLEVBQVcsQ0FBRXRELEtBQU00RSxFQUFPM0UsU0FDMUN3RCxFQUFRUSxRQUFRWSxHQUNoQkYsRUFBYW5ELE9BQ2YsQ0FURXNELENBRmFKLEVBQVMxRSxLQUNUMEUsRUFBU3pFLEtBQ2dCLElBVXhDLFNBQVN1RCxFQUFpQmIsR0FDeEIwQixFQUFlOUMsS0FBS29CLEVBQ3RCLENBVkFnQyxFQUFhcEYsb0JBakRheEQsS0FDeEJnSixFQUFBQSxTQUFzQjFILElBQ3BCLE1BQU0ySCxFQUFZLElBQUk3SCxFQUFjcEIsRUFBVXNCLEdBQ3hDNEgsRUFBVzVILEVBQVk2SCxhQUFhLFFBQzFDckMsRUFBZW9DLEdBQVlELEVBQzVCQSxFQUFVdkYsa0JBQWtCLEdBQzNCLEVBc0RKQSxDQUFpQjFELEdBR2pCZ0osRUFBQUEsaUJBQXVDLFNBQVMsS0FDOUMsTUFBTUwsRUFBVzVCLEVBQVNLLGNBQzFCTixFQUFlLG1CQUFtQjNELGtCQUNsQ3VGLEVBQWlCL0IsZUFBZWdDLEdBQ2hDRCxFQUFpQmxELE1BQU0sSUFHekJ3RCxFQUFBQSxpQkFBc0MsU0FBUyxLQUM3Q2xDLEVBQWUsa0JBQWtCM0Qsa0JBQ2pDeUYsRUFBYXBELE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb25zdGFudHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9kb20uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcFVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcFVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wVXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gWyAvLyBpbml0aWFsIGFycmF5IG9mIGNhcmRzXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTsgXG5cblxuXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gICAgLy92YWxpZGF0aW9uIHNldHRpbmdzIGZvciB0aGUgZm9ybSB2YWxpZGF0b3JcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvbl9zdWJtaXRcIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICB9O1xuXG5leHBvcnQgY29uc3QgdXNlckluZm9TZXR0aW5ncyA9IHtcbiAgdXNlck5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxuICBqb2JOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXG59XG5cbiIsImltcG9ydCB7c2V0dGluZ3N9IGZyb20gXCIuLi9jb25zdGFudHMvY29uc3RhbnRzLmpzXCJcblxuZXhwb3J0IGNvbnN0IGZvcm1MaXN0ID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKV1cbmV4cG9ydCBjb25zdCBtb2RhbHMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKV07IC8vZ2V0IGFsbCBtb2RhbCBjb250YWluZXJzXG5cbi8qRURJVCBQUk9GSUxFKi9cbmV4cG9ydCBjb25zdCBwcm9maWxlQnV0dG9uRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1idXR0b24tZWRpdFwiKTsgLy9wcm9maWxlIGVkaXQgYnV0dG9uXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZWRpdC1wcm9maWxlXCIpOyAvL3Byb2ZpbGUgZWRpdCBtb2RhbFxuZXhwb3J0IGNvbnN0IHByb2ZpbGVCdXR0b25DbG9zZSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvciggLy9wcm9maWxlIGVkaXQgbW9kYWwgY2xvc2UgYnV0dG9uXG4gIFwiI21vZGFsLWVkaXQtYnV0dG9uLWNsb3NlXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7IC8vcHJvZmlsZSBuYW1lIGVsZW1lbnRcbmV4cG9ydCBjb25zdCBwcm9maWxlQmlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19zdWJ0aXRsZVwiKTsgLy8gcHJvZmlsZSBiaW8gZWxlbWVudFxuZXhwb3J0IGNvbnN0IHByb2ZpbGVDdXJyZW50TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1uYW1lXCIpOyAvLyBwcm9maWxlIGN1cnJlbnQgbmFtZSBpbnB1dFxuZXhwb3J0IGNvbnN0IHByb2ZpbGVDdXJyZW50QmlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWJpb1wiKTsgLy8gcHJvZmlsZSBjdXJyZW50IGJpbyBpbnB1dFxuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtRWRpdCA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1mb3JtLWVkaXRcIik7IC8vIHByb2ZpbGUgZWRpdCBmb3JtXG5leHBvcnQgY29uc3QgZWRpdFN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtYnV0dG9uLXNhdmVcIik7XG5cbi8qQUREIFBST0ZJTEUgKi9cbmV4cG9ydCBjb25zdCBwcm9maWxlQnV0dG9uQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWJ1dHRvbi1hZGRcIik7Ly8gcHJvZmlsZSBhZGQgYnV0dG9uXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1hZGQtcHJvZmlsZVwiKTsgLy8gcHJvZmlsZSBhZGQgbW9kYWxcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybUFkZCA9IHByb2ZpbGVBZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1tb2RhbC1mb3JtXCIpOyAvL3Byb2ZpbGUgYWRkIGZvcm1cbmV4cG9ydCBjb25zdCBwcm9maWxlQnV0dG9uQ2xvc2VBZGQgPSBwcm9maWxlQWRkTW9kYWwucXVlcnlTZWxlY3RvciggLy8gcHJvZmlsZSBhZGQgbW9kYWwgY2xvc2UgYnV0dG9uXG4gIFwiI21vZGFsLWJ1dHRvbi1jbG9zZS1hZGRcIlxuKTtcbmV4cG9ydCBjb25zdCBhZGRTdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWJ1dHRvbi1jcmVhdGVcIik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkSW1hZ2VUaXRsZSA9IHByb2ZpbGVGb3JtQWRkLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLXRpdGxlXCIpOyAvL3Byb2ZpbGUgYWRkIGltYWdlIHRpdGxlXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEltYWdlTGluayA9IHByb2ZpbGVGb3JtQWRkLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWltYWdlVVJMXCIpOyAvLyBwcnRvZmlsZSBhZGQgaW1hZ2UgbGlua1xuXG4vKlBSRVZJRVcgSU1BR0UqL1xuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1wcmV2aWV3SW1hZ2VcIik7IC8vcHJldmlldyBpbWFnZSBtb2RhbFxuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXdJbWFnZVwiKTsgLy9nZXQgcHJldmlldyBpbWFnZSBlbGVtZW50XG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctdGl0bGVcIik7IC8vZ2V0IHByZXZpZXcgaW1hZ2UgdGl0bGUgZWxlbWVudFxuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZU1vZGFsQ2xvc2UgPSBwcmV2aWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKCAvL3ByZXZpZXcgaW1hZ2UgbW9kYWwgY2xvc2UgYnV0dG9uXG4gIFwiI21vZGFsLWJ1dHRvbi1jbG9zZS1wcmV2aWV3XCJcbik7XG5cbi8qQ09ORklSTUFUSU9OIE1PREFMKi9cblxuLypBVkFUQVIqL1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyXCIpXG5cbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19jb250ZW50XCIpOyAvLyBjYXJkIGNvbnRlbnQgY29udGFpbmVyXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQgIC8vIGNsb25lZCBjYXJkIHRlbXBsYXRlXG4gIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcbiAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7IFxuXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkgeyBcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjsgXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjsgXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7IFxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzczsgXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7IFxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDsgXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oIFxuICAgICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSBcbiAgICApOyBcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTsgXG4gIH0gXG4gXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsLCBlcnJvck1lc3NhZ2VFbG0pIHsgXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7IFxuICAgIGVycm9yTWVzc2FnZUVsbS50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7IFxuICAgIGVycm9yTWVzc2FnZUVsbS5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpOyBcbiAgfSBcblxuICBfaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsKSB7IFxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsbSA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApOyBcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTsgXG4gICAgZXJyb3JNZXNzYWdlRWxtLnRleHRDb250ZW50ID0gXCIgXCI7IFxuICAgIGVycm9yTWVzc2FnZUVsbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpOyBcbiAgfSBcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbCwgaW5wdXRFbCkgeyBcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHsgXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvciggXG4gICAgICAgIGlucHV0RWwsIFxuICAgICAgICBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKSBcbiAgICAgICk7IFxuICAgIH0gZWxzZSB7IFxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsKTsgXG4gICAgfSBcbiAgfSBcblxuICBfY2hlY2tGb3JtVmFsaWRpdHkgPSAoKSA9PiB7IFxuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KCBcbiAgICAgIChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQgXG4gICAgKTsgXG4gIH07IFxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIFxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcih0aGlzLl9mb3JtLCBpbnB1dEVsZW1lbnQpIFxuICAgIH0pO1xuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7IFxuICAgIGNvbnN0IGlzRm9ybVZhbGlkID0gdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkoKTsgXG4gICAgaWYgKGlzRm9ybVZhbGlkKSB7IFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7IFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7IFxuICAgIH0gZWxzZSB7IFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7IFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTsgXG4gICAgfSBcbiAgfSBcblxuICBzZXRFdmVudExpc3RlbmVycygpIHsgXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHsgXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHsgXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eSh0aGlzLl9mb3JtLCBpbnB1dEVsZW1lbnQpOyBcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpOyBcbiAgICAgIH0pOyBcbiAgICB9KTsgXG4gIH0gXG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHsgXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHsgXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTsgXG4gICAgfSk7IFxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXG4gIH0gXG59ICIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUhlYXJ0QnV0dG9uKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlVHJhc2hCdXR0b24oKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcbiAgICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUhlYXJ0QnV0dG9uKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlVHJhc2hCdXR0b24oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX2dldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBnZXRDYXJkRWxlbWVudCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldEVsZW1lbnQoKTtcbiAgICBjb25zdCBjYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG5cbiAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG5cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnlFc2NhcGUgPSB0aGlzLl9jbG9zZUJ5RXNjYXBlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fY2xvc2VPdmVybGF5YnlDbGljayA9IHRoaXMuX2Nsb3NlT3ZlcmxheWJ5Q2xpY2suYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fY2xvc2VCeUVzY2FwZSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fY2xvc2VPdmVybGF5YnlDbGljayk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZUJ5RXNjYXBlKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZU92ZXJsYXlieUNsaWNrKTtcbiAgfVxuXG4gIF9jbG9zZUJ5RXNjYXBlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIF9jbG9zZU92ZXJsYXlieUNsaWNrKGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkgIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpe1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKXx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2J1dHRvbi1jbG9zZVwiKSlcbiAgICAgIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vYWRkIGV2ZW50IGxpc3RlbmVyIGZvciBjbG9zaW5nIHBvcHVwcyBieSBFc2Mga2V5XG4gIC8vZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2dCkgPT4ge1xuICAvLyAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgLy8gICAgY29uc3Qgb3BlbmVkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcbiAgLy8gICAgaWYgKG9wZW5lZFBvcHVwKSB7XG4gIC8vICAgICAgcG9wVXBXaXRoSW1hZ2UuY2xvc2UoKTtcbiAgLy8gICAgICBwb3BVcEVkaXRQcm9maWxlLmNsb3NlKCk7XG4gIC8vICAgICAgcG9wVXBBZGRJdGVtLmNsb3NlKCk7XG4gIC8vICAgIH1cbiAgLy8gIH1cbiAgLy99KTtcblxuICAvL0FkZCBldmVudCBsaXN0ZW5lcnMgZm9yIGNsb3NpbmcgcG9wdXBzIGNsaWNraW5nIG91dHNpZGVcbiAgLy9ET00ubW9kYWxzLmZvckVhY2goKG1vZGFsQ29udGFpbmVyKSA9PiB7XG4gIC8vICBtb2RhbENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgLy8gICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcbiAgLy8gICAgIHBvcFVwV2l0aEltYWdlLmNsb3NlKCk7XG4gIC8vICAgICBwb3BVcEVkaXRQcm9maWxlLmNsb3NlKCk7XG4gIC8vICAgICBwb3BVcEFkZEl0ZW0uY2xvc2UoKTtcbiAgLy8gICB9XG5cbiAgLy8gaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2J1dHRvbi1jbG9zZVwiKSkge1xuICAvLyAgIHBvcFVwV2l0aEltYWdlLmNsb3NlKCk7XG4gIC8vICAgcG9wVXBFZGl0UHJvZmlsZS5jbG9zZSgpO1xuICAvLyAgIHBvcFVwQWRkSXRlbS5jbG9zZSgpO1xuICAvLyB9XG4gIC8vfSk7XG4gIC8vL30pO1xufVxuIiwiaW1wb3J0IFBvcFVwIGZyb20gXCIuL1BvcFVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcFVwV2l0aEZvcm0gZXh0ZW5kcyBQb3BVcCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3BGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5fcG9wU3VibWl0QnRuID0gdGhpcy5fcG9wRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25fc3VibWl0XCIpO1xuICAgIHRoaXMuX3BvcElucHV0cyA9IHRoaXMuX3BvcEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgcG9wSW5wVmFsdWVzID0ge307XG4gICAgdGhpcy5fcG9wSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBwb3BJbnBWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gcG9wSW5wVmFsdWVzO1xuICB9XG5cbiAgX2hhbmRsZVN1Ym1pdChldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTsgXG4gICAgY29uc3QgaW5wdXRWYWx1ZSA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlKTtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9wb3BJbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgaWYgKGRhdGEgW2lucHV0Lm5hbWVdKSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gY2xvc2UoKSB7XG4gICB0aGlzLl9wb3BGb3JtLnJlc2V0KCk7XG4gICBzdXBlci5jbG9zZSgpO1xuIH1cbn0iLCJpbXBvcnQgKiBhcyBET00gZnJvbSBcIi4uL3V0aWxzL2RvbS5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcFVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcFVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wVXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3BVcFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHNldHRpbmdzIH0gZnJvbSBcIi4uL2NvbnN0YW50cy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5cbi8vRm9ybSBWYWxpZGF0b3JzXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9XG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKHNldHRpbmdzKSA9PiB7XG4gIERPTS5mb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudClcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG4vL1VzZXIgSW5mb1xuY29uc3QgdXNlcmluZm8gPSBuZXcgVXNlckluZm8oXCIucHJvZmlsZV9fbmFtZVwiLCBcIi5wcm9maWxlX19zdWJ0aXRsZVwiKTtcblxuLy9DYXJkXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChpdGVtLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xuICByZXR1cm4gY2FyZEVsZW1lbnQuZ2V0Q2FyZEVsZW1lbnQoKTtcbn1cblxuLy9TZWN0aW9uXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBcIi5jYXJkc19fY29udGVudFwiXG4pO1xuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG4vL1BvcHVwc1xuY29uc3QgcG9wVXBXaXRoSW1hZ2UgPSBuZXcgUG9wVXBXaXRoSW1hZ2UoXCIjbW9kYWwtcHJldmlld0ltYWdlXCIpO1xucG9wVXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wVXBFZGl0UHJvZmlsZSA9IG5ldyBQb3BVcFdpdGhGb3JtKFxuICBcIiNtb2RhbC1lZGl0LXByb2ZpbGVcIixcbiAgKGZvcm1EYXRhKSA9PiB7XG4gICAgdXNlcmluZm8uc2V0VXNlckluZm8oZm9ybURhdGEpO1xuICAgIHBvcFVwRWRpdFByb2ZpbGUuY2xvc2UoKTtcbiAgfVxuKTtcbnBvcFVwRWRpdFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wVXBBZGRJdGVtID0gbmV3IFBvcFVwV2l0aEZvcm0oXCIjbW9kYWwtYWRkLXByb2ZpbGVcIiwgKGZvcm1EYXRhKSA9PiB7XG4gIGNvbnN0IG5hbWUgPSBmb3JtRGF0YS5uYW1lO1xuICBjb25zdCBsaW5rID0gZm9ybURhdGEubGluaztcbiAgaGFuZGxlQWRkUHJvZmlsZUZvcm1TdWJtaXQobmFtZSwgbGluayk7XG59KTtcbnBvcFVwQWRkSXRlbS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL0V2ZW50IEhhbmRsZXJzXG5mdW5jdGlvbiBoYW5kbGVBZGRQcm9maWxlRm9ybVN1Ym1pdCh0aXRsZSwgbGluaykge1xuICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZCh7IG5hbWU6IHRpdGxlLCBsaW5rIH0pO1xuICBzZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XG4gIHBvcFVwQWRkSXRlbS5jbG9zZSgpO1xufVxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhkYXRhKSB7XG4gIHBvcFVwV2l0aEltYWdlLm9wZW4oZGF0YSk7XG59XG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcblxuLy8gQWRkIEV2ZW50IExpc3RlbmVyc1xuRE9NLnByb2ZpbGVCdXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGZvcm1EYXRhID0gdXNlcmluZm8uZ2V0VXNlckluZm8oKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJtb2RhbC1lZGl0LWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHBvcFVwRWRpdFByb2ZpbGUuc2V0SW5wdXRWYWx1ZXMoZm9ybURhdGEpO1xuICBwb3BVcEVkaXRQcm9maWxlLm9wZW4oKTtcbn0pO1xuXG5ET00ucHJvZmlsZUJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1tcIm1vZGFsLWFkZC1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3BVcEFkZEl0ZW0ub3BlbigpO1xufSk7XG5cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8geyAvL3JlcHNvbnNpYmxlIGZvciByZW5kZXJpbmcgaW5mb3JtYXRpb24gZnJvbSB0aGUgdXNlclxuICAgIGNvbnN0cnVjdG9yKHVzZXJOYW1lU2VsZWN0b3IsIGpvYk5hbWVTZWxlY3Rvcil7Ly9vYmplY3Qgd2l0aCBzZWxlY3RvcnMgb2YgdHdvIGVsZW1lbnRzXG4gICAgICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iTmFtZVNlbGVjdG9yKTtcbiAgICB9XG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIGNvbnN0IHVzZXJJbnB1dCA9IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdXNlcklucHV0O1xuICAgIH1cbiAgICBcbiAgICBzZXRVc2VySW5mbyhkYXRhKXtcbiAgICAgICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLmpvYjtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbntcbiAgICBjb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IgKXtcbiAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgICAgLy90aGlzIENTUyBjbGFzcyBzZWxlY3RvciBpcyB3aGVyZSB5b3UnbGwgYWRkIHRoZSBjYXJkIGVsZW1lbnRzXG4gICAgfVxuICAgIHJlbmRlckl0ZW1zKCl7XG4gICAgICAgIC8vcHVibGljIG1ldGhvZCB0aGF0IHJlbmRlcnMgYWxsIGVsZW1lbnRzIG9uIHRoZSBwYWdlLFxuICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICBcbiAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkSXRlbShlbGVtZW50KVxuICAgIHtcbiAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7ICAgLy9wdWJsaWMgbWV0aG9kLCB0YWtlcyBhIERPTSBlbGVtZW50XG4gICAgICAgIC8vYW5kIGFkZHMgaXQgdG8gdGhlIGNvbnRhaW5lclxuICAgIH07XG59XG4iLCJpbXBvcnQgUG9wVXAgZnJvbSBcIi4vUG9wVXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wVXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3BVcCB7XG4gIGNvbnN0cnVjdG9yKHBvcFVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3BVcFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3SW1hZ2VcIik7XG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctdGl0bGVcIik7IFxuICAgIFxuICB9XG4gIG9wZW4oZGF0YSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS5saW5rOyBcbiAgICAgIHRoaXMuX2ltYWdlLmFsdCA9IGRhdGEubmFtZTsgIFxuICAgICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTsgXG4gICAgfVxuICB9XG4gXG59XG5cbiAgXG4vL3N1cGVyKGNsb3NlKVxuLy9zdXBlcihzZXRFdmVudExpc3RlbmVycykgXG4gIFxuXG5cbi8vZXhwb3J0IGRlZmF1bHQgUG9wVXBXaXRoSW1hZ2U7Il0sIm5hbWVzIjpbInNldHRpbmdzIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJmb3JtU2VsZWN0b3IiLCJmb3JtTGlzdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInByb2ZpbGVCdXR0b25FZGl0IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlQnV0dG9uQWRkIiwicHJvZmlsZUFkZE1vZGFsIiwicHJvZmlsZUZvcm1BZGQiLCJwcmV2aWV3SW1hZ2VNb2RhbCIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybSIsIl9pbnB1dEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbG0iLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiZm9ybUVsIiwiaWQiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0Zvcm1WYWxpZGl0eSIsImV2ZXJ5IiwiaW5wdXQiLCJyZXNldFZhbGlkYXRpb24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJkaXNhYmxlZCIsInNldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIkNhcmQiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwibmFtZSIsImxpbmsiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJfaGFuZGxlSGVhcnRCdXR0b24iLCJfaGFuZGxlVHJhc2hCdXR0b24iLCJ0b2dnbGUiLCJfZ2V0RWxlbWVudCIsImdldENhcmRFbGVtZW50IiwiY2FyZFRpdGxlIiwiY2FyZEltYWdlIiwic3JjIiwiYWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ5RXNjYXBlIiwiYmluZCIsIl9jbG9zZU92ZXJsYXlieUNsaWNrIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wVXBXaXRoRm9ybSIsIlBvcFVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcEZvcm0iLCJfcG9wU3VibWl0QnRuIiwiX3BvcElucHV0cyIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwicG9wSW5wVmFsdWVzIiwidmFsdWUiLCJfaGFuZGxlU3VibWl0IiwiaW5wdXRWYWx1ZSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsInJlc2V0IiwiZm9ybVZhbGlkYXRvcnMiLCJ1c2VyaW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJqb2JOYW1lU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJjcmVhdGVDYXJkIiwiaXRlbSIsImhhbmRsZUltYWdlQ2xpY2siLCJzZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZEVsZW1lbnQiLCJwb3BVcFdpdGhJbWFnZSIsInBvcFVwU2VsZWN0b3IiLCJfaW1hZ2UiLCJfY2FwdGlvbiIsInBvcFVwRWRpdFByb2ZpbGUiLCJmb3JtRGF0YSIsInBvcFVwQWRkSXRlbSIsInRpdGxlIiwibmV3Q2FyZCIsImhhbmRsZUFkZFByb2ZpbGVGb3JtU3VibWl0IiwiRE9NIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9